\section {Discussion}
\label{sec:discussion}

Although we have a functional \Kudos\ UFS \module, there are still several
aspects that we hope to improve on for completeness, performance, and
modularity.

% \subsection {Features}
For the UFS \module, we want to add more features to make the implementation
complete. Currently, we do not support symbolic links, triple indirect blocks,
or sparse files. The first two can easily be implemented given time. Sparse
file support will require the LFS interface to be aware of files with holes.
This also means the layer immediately above the LFS interface may need to
adjust some of the assumptions it currently makes about files and block
allocation.

We have not taken advantage of the UFS \module's infrastructure for supporting
more sophisticated allocation algorithms. There are auxiliary on-disk data
structures that assist resource allocation algorithms. We currently ignore many
of them, partially because our basic algorithms do not use them, and partially
due to the lack of documentation to explain the purpose of some data
structures. Over time, we hope to better understand UFS and improve our UFS
implementation. With our modular file system design, we should be able to
easily swap in new allocation and directory traversal algorithms like the ones
used in the FreeBSD implementation.

We also want to improve overall performance by making good
\chdesc\ arrangements. In \S\ref{sec:arrangements}, we observed a
strong relationship between the \chdesc\ arrangements generated by the file
system and the library code that manages \chdescs. To achieve better
performance, we need to optimize both sides in a cooperative manner. File
system \modules\ need to arrange \chdescs\ to take advantage of properties of
\chdesc\ library code. \Chdesc\ functions need to optimize for common
arrangement patterns.

As we implement other file systems in \Kudos, we will see commonalities between
different file systems. For instance, we can probably easily implement UFS2 by
updating our existing file system to use the modified UFS2 data structures.
We can also implement Linux's ext2 file system, which in some aspects is
easier than UFS. With more experience writing file systems, we will
gain insight into the design for internal file system \module\ interfaces.
Hopefully, we will have some set of standard interfaces within a file system
\module, such that submodules can be plugged into many file systems, to improve
code reuse and portability.

